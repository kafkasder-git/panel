{
  "meta": {
    "project": "Kafkasder Yönetim Sistemi (Panel-5)",
    "date": "2025-10-04",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "Kafkasder Yönetim Sistemi (Panel-5) is a comprehensive, modular web application designed to unify and manage all operations of a charitable organization. The system integrates various modules including beneficiary management, donation handling, campaign management, financial processing, legal services, and internal communications with a focus on role-based access control, security, and performance optimization.",
  "core_goals": [
    "Centralize all organizational operations in a single web platform with modular architecture.",
    "Ensure strict role-based access and permissions aligning with organizational roles such as SYSADMIN, ADMIN, OPS, FIN, VOL, and VIEWER.",
    "Provide end-to-end management of donations, beneficiaries, aid requests, campaigns, financial transactions, and legal services.",
    "Guarantee data integrity, security, and privacy compliance (KVKK/GDPR) through mechanisms like audit trails, encryption, CSRF/XSS protections, and role-level security (RLS).",
    "Offer real-time status tracking and notifications across workflows such as aid requests, campaign progress, and financial approvals.",
    "Deliver user-friendly UX with accessibility, mobile support, and intuitive navigation.",
    "Enable robust reporting, export, and performance monitoring to support operational transparency and continuous improvement."
  ],
  "key_features": [
    "Supabase-based authentication system with CSRF protection, audit logging, and role-based access control (RBAC).",
    "Comprehensive beneficiary and aid request management with multi-stage workflows and status tracking.",
    "Donation management supporting multiple payment sources, automatic receipt generation, reconciliations, and refund handling.",
    "Campaign creation and management with real-time progress tracking and automatic notifications.",
    "Financial management featuring bank payment orders, dual-signature approvals, transaction tracking, and export capabilities.",
    "Document upload and management with validation and optional virus scanning.",
    "System-wide security features including XSS prevention, data sanitization, secure storage, and encrypted sensitive data.",
    "User and role management interfaces enabling fine-grained permission assignments and profile management.",
    "Internal communication module supporting messaging within organization roles.",
    "Enhanced dashboard with metrics, KPI tracking, and continuous performance and error monitoring.",
    "Data export tools with permission controls and extensive validation rules enforced via Zod schemas.",
    "Detailed audit trail and soft-delete for critical data records, supporting compliance needs."
  ],
  "user_flow_summary": [
    "User authentication followed by role-based dashboard access controlling available modules and features.",
    "Beneficiary registration by OPS role including document uploads, scoring via matrix, and confidentiality handling.",
    "Submission and multi-step review of aid requests progressing through statuses: pending, review, approved/rejected, scheduled, delivered, closed.",
    "Donation lifecycle starting with recording (online/offline), receipt generation, reconciliation with bank records, and reporting/export.",
    "Campaign lifecycle management from draft to active, pause, and automatic closure upon target achievement with notifications.",
    "Financial workflow including transaction entry, dual-approval for large sums, and period closure locking.",
    "System setting adjustments by SYSADMIN and ADMIN roles with configuration for notifications, approvals, and user roles.",
    "Error handling workflows with user-friendly notifications and retry mechanisms for network issues.",
    "Data export and reporting flows with role-based permissions and filters for CSV/Excel downloads."
  ],
  "validation_criteria": [
    "All user stories verified through scenario testing covering positive and negative paths.",
    "Accessibility compliance ensured with no critical errors by tools like aXe.",
    "Performance targets met: list render <2 seconds, page load <3 seconds at 75th percentile latency.",
    "Role Level Security (RLS) enforced and tested; unauthorized actions return HTTP 403.",
    "Complete audit logging of critical actions with configurable retention (minimum 1 year).",
    "Form and input validations using Zod schema and business rules passed successfully.",
    "Soft-delete implemented with proper role constraints on hard deletes (SYSADMIN only).",
    "Notifications triggered per business rule scenarios including campaign milestones and aid approvals.",
    "Automated and manual tests ensure no duplicate unique fields (TCKN, IBAN, receipt numbers).",
    "Security protections validated including CSRF tokens, XSS sanitization, encrypted sensitive fields, and MFA options.",
    "Operational monitoring alerts triggered for error thresholds (>2%) and critical flow failures.",
    "Compliance with GDPR/KVKK for data processing, deletion/anonymization, and export processes."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React",
      "Vite",
      "Supabase",
      "Tailwind CSS",
      "Lucide React",
      "Sonner",
      "Framer Motion"
    ],
    "features": [
      {
        "name": "Authentication System",
        "description": "Supabase-based authentication with CSRF protection, RBAC, and audit logging",
        "files": [
          "contexts/SupabaseAuthContext.tsx",
          "components/auth/ProtectedRoute.tsx",
          "components/auth/UnauthorizedPage.tsx",
          "lib/supabase.ts",
          "hooks/useCSRFToken.ts",
          "middleware/csrf.ts",
          "services/auditService.ts"
        ]
      },
      {
        "name": "Security Features",
        "description": "XSS prevention, CSRF protection, data sanitization, and secure storage",
        "files": [
          "lib/sanitization.ts",
          "lib/secureStorage.ts",
          "components/ui/table.tsx"
        ]
      },
      {
        "name": "Navigation System",
        "description": "State-based navigation with sidebar and page routing",
        "files": [
          "components/Sidebar.tsx",
          "components/app/NavigationManager.tsx",
          "components/app/PageRenderer.tsx",
          "components/app/AppNavigation.tsx"
        ]
      },
      {
        "name": "Beneficiary Management",
        "description": "Comprehensive beneficiary management with CRUD operations",
        "files": [
          "components/pages/BeneficiariesPageEnhanced.tsx",
          "components/pages/BeneficiaryDetailPageComprehensive.tsx",
          "services/ihtiyacSahipleriService.ts"
        ]
      },
      {
        "name": "Aid Management",
        "description": "Aid request and distribution management system",
        "files": [
          "components/pages/AidPage.tsx",
          "components/pages/AllAidListPage.tsx",
          "components/pages/AidApplicationsPage.tsx",
          "components/pages/CashAidTransactionsPage.tsx",
          "components/pages/InKindAidTransactionsPage.tsx",
          "components/pages/CashAidVaultPage.tsx"
        ]
      },
      {
        "name": "Financial Management",
        "description": "Bank payment orders with dual-signature approval workflow",
        "files": ["components/pages/BankPaymentOrdersPage.tsx"]
      },
      {
        "name": "Campaign Management",
        "description": "Fundraising campaign creation and management",
        "files": ["components/pages/CampaignManagementPage.tsx"]
      },
      {
        "name": "Document Management",
        "description": "Secure document upload with validation and virus scanning",
        "files": ["components/forms/DocumentUpload.tsx"]
      },
      {
        "name": "System Settings",
        "description": "Comprehensive system configuration interface",
        "files": ["components/pages/SystemSettingsPage.tsx"]
      },
      {
        "name": "Dashboard",
        "description": "Enhanced dashboard with metrics and analytics",
        "files": ["components/ui/EnhancedDashboard.tsx"]
      },
      {
        "name": "Member Management",
        "description": "Member registration and fee tracking",
        "files": [
          "components/pages/MembersPage.tsx",
          "components/pages/MembershipFeesPage.tsx",
          "components/pages/NewMemberPage.tsx"
        ]
      },
      {
        "name": "Scholarship Management",
        "description": "Student scholarship application and management",
        "files": [
          "components/pages/BursStudentsPage.tsx",
          "components/pages/BursApplicationsPage.tsx"
        ]
      },
      {
        "name": "Legal Services",
        "description": "Legal consultation and case management",
        "files": [
          "components/pages/LegalConsultationPage.tsx",
          "components/pages/LawyerAssignmentsPage.tsx",
          "components/pages/LawsuitTrackingPage.tsx",
          "components/pages/LegalDocumentsPage.tsx"
        ]
      },
      {
        "name": "Service Tracking",
        "description": "Service delivery and tracking system",
        "files": [
          "components/pages/ServiceTrackingPage.tsx",
          "components/pages/HospitalReferralPage.tsx",
          "components/pages/AppointmentSchedulingPage.tsx",
          "components/pages/CaseManagementPage.tsx"
        ]
      },
      {
        "name": "Partner Management",
        "description": "Partner organization and agreement management",
        "files": [
          "components/pages/ApplicationWorkflowPage.tsx",
          "components/pages/DocumentManagementPage.tsx",
          "components/pages/DistributionTrackingPage.tsx"
        ]
      },
      {
        "name": "Internal Messaging",
        "description": "Internal communication and messaging system",
        "files": ["components/pages/InternalMessagingPage.tsx"]
      },
      {
        "name": "User Management",
        "description": "User administration and role management",
        "files": [
          "components/pages/UserManagementPageReal.tsx",
          "components/pages/ProfilePage.tsx"
        ]
      },
      {
        "name": "UI Components",
        "description": "Reusable UI components and utilities",
        "files": [
          "components/ui/button.tsx",
          "components/ui/card.tsx",
          "components/ui/dialog.tsx",
          "components/ui/input.tsx",
          "components/ui/table.tsx",
          "components/ui/badge.tsx",
          "components/ui/progress.tsx",
          "components/ui/select.tsx",
          "components/ui/textarea.tsx",
          "components/ui/tabs.tsx",
          "components/ui/switch.tsx",
          "components/ui/popover.tsx",
          "components/ui/tooltip.tsx"
        ]
      },
      {
        "name": "Error Handling",
        "description": "Comprehensive error boundary and handling system",
        "files": [
          "components/ErrorBoundary.tsx",
          "components/SafeWrapper.tsx",
          "components/StoreErrorBoundary.tsx",
          "components/NotificationErrorBoundary.tsx",
          "lib/errorHandling.ts"
        ]
      },
      {
        "name": "Performance Monitoring",
        "description": "Performance optimization and monitoring tools",
        "files": [
          "lib/performance/optimizer.ts",
          "lib/performance/webVitals.ts",
          "lib/monitoring/healthCheck.ts",
          "lib/monitoring/sentry.ts"
        ]
      },
      {
        "name": "Data Export",
        "description": "Data export functionality with permission checking",
        "files": ["hooks/useDataExport.ts"]
      }
    ]
  }
}
